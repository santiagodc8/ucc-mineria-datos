<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 04 - Data Filtering & Selection</title>
    <style>
        /* ===========================================
           DATA ANALYTICS COURSE - WEEK 4
           Data Filtering & Selection
           Universidad Cooperativa de Colombia
           Instructor: Julian Eduardo Garzon Giraldo, MsC
           =========================================== */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        .presentation-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ===========================================
           SLIDE BASE STYLES
           =========================================== */
        .slide {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 60px;
            margin: 40px 0;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 80vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .slide:first-of-type {
            display: flex;
        }

        .slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            border-radius: 20px 20px 0 0;
        }

        /* ===========================================
           TITLE SLIDE
           =========================================== */
        .title-slide {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .title-slide::before {
            display: none;
        }

        .title-slide h1 {
            font-size: 3.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: white;
        }

        .title-slide h1::after {
            display: none;
        }

        .title-slide h2 {
            font-size: 1.8rem;
            margin-bottom: 40px;
            opacity: 0.9;
            color: white;
        }

        .title-slide .info {
            font-size: 1.3rem;
            opacity: 0.8;
        }

        /* ===========================================
           HEADINGS
           =========================================== */
        h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 40px;
            text-align: center;
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        h2 {
            font-size: 1.8rem;
            color: #34495e;
            margin: 30px 0 20px 0;
        }

        h3 {
            font-size: 1.4rem;
            color: #2c3e50;
            margin: 20px 0 15px 0;
        }

        /* ===========================================
           NAVIGATION
           =========================================== */
        .nav-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 14px;
        }

        .nav-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .slide-counter {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 14px;
        }

        /* ===========================================
           GRID LAYOUTS
           =========================================== */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin: 40px 0;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin: 40px 0;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        /* ===========================================
           CARDS
           =========================================== */
        .card {
            padding: 25px;
            border-radius: 15px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .card-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .card-success {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }

        .card-warning {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
        }

        .card-danger {
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
            color: white;
        }

        .card-info {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .card-light {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #2c3e50;
            border-left: 5px solid #667eea;
        }

        .card h3 {
            color: inherit;
            margin-top: 0;
        }

        .card-white h3,
        .card-light h3 {
            color: #667eea;
        }

        /* ===========================================
           CODE BLOCKS
           =========================================== */
        .code-block {
            background: #1a202c;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 12px;
            font-family: 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            overflow-x: auto;
            margin: 20px 0;
            border: 1px solid #4a5568;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            white-space: pre;
        }

        .code-inline {
            background: #e2e8f0;
            color: #1a202c;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
        }

        /* Syntax highlighting colors */
        .code-block .keyword { color: #f687b3; }
        .code-block .string { color: #68d391; }
        .code-block .comment { color: #718096; font-style: italic; }
        .code-block .function { color: #63b3ed; }
        .code-block .number { color: #f6ad55; }

        /* ===========================================
           LISTS
           =========================================== */
        .list-styled {
            list-style: none;
            margin: 20px 0;
        }

        .list-styled li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .list-styled li:last-child {
            border-bottom: none;
        }

        .list-check li::before {
            content: '';
            background: #00b894;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        /* ===========================================
           CONCEPT BOX (Explanations like for 10-year-olds)
           =========================================== */
        .concept-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 5px solid #667eea;
            padding: 25px 30px;
            border-radius: 0 15px 15px 0;
            margin: 30px 0;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .concept-box p {
            margin: 10px 0;
        }

        .concept-box strong {
            color: #667eea;
        }

        .concept-box .analogy {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-style: italic;
        }

        /* ===========================================
           COMPARISON BOXES
           =========================================== */
        .comparison-good {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
        }

        .comparison-bad {
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
        }

        /* ===========================================
           ALERT BOXES
           =========================================== */
        .alert {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .alert-warning {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            color: #856404;
        }

        .alert-info {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            color: #0c5460;
        }

        .alert-success {
            background: #d4edda;
            border-left: 5px solid #28a745;
            color: #155724;
        }

        .alert-danger {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            color: #721c24;
        }

        /* ===========================================
           TABLES
           =========================================== */
        .table-styled {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .table-styled thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .table-styled th,
        .table-styled td {
            padding: 15px;
            text-align: left;
        }

        .table-styled tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .table-styled tbody tr:hover {
            background: #e9ecef;
        }

        /* ===========================================
           PROCESS FLOW
           =========================================== */
        .process-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 40px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .process-step {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            border-radius: 15px;
            text-align: center;
            min-width: 150px;
            position: relative;
        }

        .process-arrow {
            font-size: 1.5rem;
            color: #667eea;
            font-weight: bold;
        }

        /* ===========================================
           VISUAL DATAFRAME
           =========================================== */
        .dataframe-visual {
            border: 3px solid #667eea;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .dataframe-visual .header-row {
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: grid;
            color: white;
            font-weight: 600;
        }

        .dataframe-visual .data-row {
            display: grid;
            border-bottom: 1px solid #eee;
        }

        .dataframe-visual .data-row:nth-child(even) {
            background: rgba(102, 126, 234, 0.05);
        }

        .dataframe-visual .cell {
            padding: 12px 15px;
            text-align: center;
            font-size: 0.95rem;
        }

        .dataframe-visual .index-cell {
            background: rgba(102, 126, 234, 0.1);
            font-weight: 600;
            color: #667eea;
        }

        .cell-true {
            background: rgba(0, 184, 148, 0.2) !important;
            color: #00b894;
            font-weight: bold;
        }

        .cell-false {
            background: rgba(255, 118, 117, 0.15) !important;
            color: #d63031;
            font-weight: bold;
        }

        .cell-highlight {
            background: rgba(0, 184, 148, 0.15) !important;
            font-weight: bold;
        }

        .cell-dim {
            color: #adb5bd;
        }

        /* ===========================================
           VENN DIAGRAM (CSS-only)
           =========================================== */
        .venn-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            position: relative;
            height: 220px;
        }

        .venn-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .venn-circle-left {
            left: calc(50% - 160px);
            opacity: 0.7;
        }

        .venn-circle-right {
            left: calc(50% - 40px);
            opacity: 0.7;
        }

        .venn-label {
            position: absolute;
            font-size: 0.85rem;
            font-weight: 600;
            color: #2c3e50;
        }

        /* ===========================================
           BEFORE/AFTER VISUAL
           =========================================== */
        .before-after {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
        }

        .before-after .arrow {
            font-size: 2rem;
            color: #667eea;
        }

        /* ===========================================
           ANIMATIONS
           =========================================== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* ===========================================
           RESPONSIVE
           =========================================== */
        @media (max-width: 768px) {
            .slide {
                padding: 30px;
                margin: 20px 0;
            }

            .title-slide h1 {
                font-size: 2.5rem;
            }

            h1 {
                font-size: 2rem;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }

            .process-flow {
                flex-direction: column;
            }

            .before-after {
                grid-template-columns: 1fr;
            }

            .venn-container {
                transform: scale(0.7);
            }
        }

        /* ===========================================
           PRINT STYLES
           =========================================== */
        @media print {
            body {
                background: white;
            }

            .slide {
                display: flex !important;
                page-break-after: always;
                min-height: auto;
                box-shadow: none;
                border: 1px solid #ddd;
            }

            .nav-container {
                display: none;
            }
        }

        /* ===========================================
           CUSTOM STYLES FOR THIS PRESENTATION
           =========================================== */
        .hook-question {
            font-size: 2rem;
            text-align: center;
            color: #667eea;
            margin: 40px 0;
            font-weight: 600;
        }

        .stat-box {
            text-align: center;
            padding: 30px;
        }

        .stat-number {
            font-size: 3.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 1.1rem;
            color: #718096;
            margin-top: 10px;
        }

        .mask-overlay {
            display: grid;
            gap: 0;
            margin: 20px 0;
        }

        .mask-row {
            display: grid;
            border-bottom: 1px solid #eee;
        }

        .mask-row .cell {
            padding: 10px 12px;
            text-align: center;
            font-size: 0.9rem;
        }

        .operator-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .operator-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s;
        }

        .operator-card:hover {
            transform: translateY(-3px);
            border-color: #667eea;
        }

        .operator-symbol {
            font-size: 2rem;
            font-family: 'Fira Code', monospace;
            color: #667eea;
            font-weight: bold;
        }

        .operator-name {
            font-size: 0.9rem;
            color: #718096;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- NAVIGATION -->
    <div class="nav-container">
        <button class="nav-btn" onclick="previousSlide()">Prev</button>
        <span class="slide-counter" id="slideCounter">1 / 18</span>
        <button class="nav-btn" onclick="nextSlide()">Next</button>
    </div>

    <div class="presentation-container">

        <!-- =========================================
             SLIDE 1: TITLE (HOOK)
             ========================================= -->
        <div class="slide title-slide">
            <h1>Data Filtering & Selection</h1>
            <h2>Week 4 - Finding the Needle in the Haystack</h2>
            <div class="info">
                <div>Julian Eduardo Garzon Giraldo, MsC</div>
                <div style="margin-top: 10px; opacity: 0.8;">Data Analytics Course - UCC</div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 2: HOOK - Why Filter?
             ========================================= -->
        <div class="slide">
            <h1>Why Do We Need Filtering?</h1>

            <p class="hook-question">Your dataset has 14,000+ rows. How do you find the ones that matter?</p>

            <div class="concept-box">
                <div style="font-size: 3rem; text-align: center; margin-bottom: 15px;">&#128218;</div>
                <p><strong>Filtering is like searching in a library.</strong></p>
                <p>You don't read every book in the library. You go to a section, look for a topic, maybe filter by author or year. You ask specific questions to narrow down what you need.</p>
                <div class="analogy">
                    Data filtering is the same: you ask pandas a question like "show me only schools in Antioquia with dropout rates above 5%" and it returns just those rows.
                </div>
            </div>

            <div class="grid-3">
                <div class="card card-primary" style="text-align: center;">
                    <h3>Focus</h3>
                    <p style="margin-top: 10px;">Analyze a specific region, year, or category</p>
                </div>
                <div class="card card-success" style="text-align: center;">
                    <h3>Compare</h3>
                    <p style="margin-top: 10px;">Compare high-performers vs. low-performers</p>
                </div>
                <div class="card card-info" style="text-align: center;">
                    <h3>Clean</h3>
                    <p style="margin-top: 10px;">Remove outliers or invalid data</p>
                </div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 3: LEARNING OBJECTIVES
             ========================================= -->
        <div class="slide">
            <h1>What You'll Learn Today</h1>
            <div class="grid-2">
                <div>
                    <h2>Objectives</h2>
                    <ul class="list-styled list-check">
                        <li>Select rows with boolean indexing</li>
                        <li>Use comparison operators to build conditions</li>
                        <li>Combine multiple conditions (AND, OR, NOT)</li>
                        <li>Filter with .isin(), .between(), .str.contains()</li>
                        <li>Use .query() as a clean alternative syntax</li>
                    </ul>
                </div>
                <div>
                    <h2>By the end you'll be able to:</h2>
                    <div class="card card-primary">
                        <p style="font-size: 1.2rem;">
                            Extract exactly the rows you need from any dataset using single or combined filter conditions.
                        </p>
                    </div>
                    <div class="alert alert-info" style="margin-top: 20px;">
                        <strong>Dataset:</strong> Same Education Statistics (MEN) you cleaned last week. Now we query it.
                    </div>
                </div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 4: REVIEW - Basic Selection (bridge)
             ========================================= -->
        <div class="slide">
            <h1>Quick Review: Selecting Data</h1>

            <div class="concept-box" style="margin-bottom: 20px;">
                <p>In Week 2, you learned how to select <strong>columns</strong> and <strong>rows by position</strong>. Today we add a new power: selecting rows <strong>by condition</strong>.</p>
            </div>

            <div class="grid-3">
                <div class="card card-light">
                    <h3>Select columns</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># One column (Series)</span>
df[<span class="string">'departamento'</span>]

<span class="comment"># Multiple columns (DataFrame)</span>
df[[<span class="string">'departamento'</span>, <span class="string">'ano'</span>]]</div>
                </div>
                <div class="card card-light">
                    <h3>Select by position</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># First 5 rows</span>
df.<span class="function">iloc</span>[:<span class="number">5</span>]

<span class="comment"># Row 10, columns 0-2</span>
df.<span class="function">iloc</span>[<span class="number">10</span>, :<span class="number">3</span>]</div>
                </div>
                <div class="card card-primary">
                    <h3>Select by condition</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Rows where year is 2023</span>
df[df[<span class="string">'ano'</span>] == <span class="number">2023</span>]

<span class="comment"># THIS IS TODAY'S TOPIC</span></div>
                </div>
            </div>

            <div class="alert alert-success" style="text-align: center;">
                <strong>Key shift:</strong> Instead of "give me row 5", you say "give me every row where the year is 2023." This is called <strong>boolean indexing</strong>.
            </div>
        </div>

        <!-- =========================================
             SLIDE 5: What Is Boolean Indexing?
             ========================================= -->
        <div class="slide">
            <h1>What Is Boolean Indexing?</h1>

            <div class="concept-box">
                <p><strong>Boolean indexing means using True/False values to select rows.</strong></p>
                <div class="analogy">
                    Imagine you have a class roster with a column "passed_exam". Every student has True or False. If you select only the True rows, you get the students who passed. That's boolean indexing: a True/False mask that picks which rows to keep.
                </div>
            </div>

            <h2 style="text-align: center; margin-top: 20px;">How It Works (Step by Step)</h2>

            <div class="before-after">
                <div>
                    <h3 style="text-align: center; color: #667eea;">Step 1: Create a mask</h3>
                    <div class="code-block" style="font-size: 0.85rem;">df[<span class="string">'ano'</span>] == <span class="number">2023</span>

<span class="comment"># Returns a Series of True/False:</span>
<span class="comment"># 0     False</span>
<span class="comment"># 1     False</span>
<span class="comment"># 2     True</span>
<span class="comment"># 3     True</span>
<span class="comment"># ...</span></div>
                </div>
                <div class="arrow" style="text-align: center; font-size: 3rem;">&#8594;</div>
                <div>
                    <h3 style="text-align: center; color: #00b894;">Step 2: Apply the mask</h3>
                    <div class="code-block" style="font-size: 0.85rem;">df[df[<span class="string">'ano'</span>] == <span class="number">2023</span>]

<span class="comment"># pandas keeps only True rows</span>
<span class="comment"># Result: only rows from 2023</span></div>
                </div>
            </div>

            <div class="alert alert-info">
                <strong>Two steps, one line:</strong> <code class="code-inline">df[df['ano'] == 2023]</code> creates the True/False mask AND applies it in a single expression.
            </div>
        </div>

        <!-- =========================================
             SLIDE 6: Visual - Boolean Mask on DataFrame
             ========================================= -->
        <div class="slide">
            <h1>Visualizing the Boolean Mask</h1>

            <p style="text-align: center; font-size: 1.1rem; margin-bottom: 20px;">
                <code class="code-inline">df['ano'] == 2023</code> creates a True/False value for every row
            </p>

            <div class="grid-2">
                <div>
                    <h3 style="text-align: center;">Original DataFrame</h3>
                    <div class="dataframe-visual">
                        <div class="header-row" style="grid-template-columns: 50px 1fr 80px 100px;">
                            <div class="cell"></div>
                            <div class="cell">departamento</div>
                            <div class="cell">ano</div>
                            <div class="cell">desercion</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr 80px 100px;">
                            <div class="cell index-cell">0</div>
                            <div class="cell">ANTIOQUIA</div>
                            <div class="cell">2022</div>
                            <div class="cell">3.1</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr 80px 100px;">
                            <div class="cell index-cell">1</div>
                            <div class="cell">ANTIOQUIA</div>
                            <div class="cell" style="font-weight: bold; color: #00b894;">2023</div>
                            <div class="cell">2.9</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr 80px 100px;">
                            <div class="cell index-cell">2</div>
                            <div class="cell">BOGOTA</div>
                            <div class="cell">2022</div>
                            <div class="cell">1.8</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr 80px 100px;">
                            <div class="cell index-cell">3</div>
                            <div class="cell">BOGOTA</div>
                            <div class="cell" style="font-weight: bold; color: #00b894;">2023</div>
                            <div class="cell">1.5</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr 80px 100px;">
                            <div class="cell index-cell">4</div>
                            <div class="cell">VALLE</div>
                            <div class="cell">2022</div>
                            <div class="cell">4.2</div>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 style="text-align: center;">Boolean Mask</h3>
                    <div class="dataframe-visual">
                        <div class="header-row" style="grid-template-columns: 50px 1fr;">
                            <div class="cell"></div>
                            <div class="cell">ano == 2023</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr;">
                            <div class="cell index-cell">0</div>
                            <div class="cell cell-false">False</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr;">
                            <div class="cell index-cell">1</div>
                            <div class="cell cell-true">True</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr;">
                            <div class="cell index-cell">2</div>
                            <div class="cell cell-false">False</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr;">
                            <div class="cell index-cell">3</div>
                            <div class="cell cell-true">True</div>
                        </div>
                        <div class="data-row" style="grid-template-columns: 50px 1fr;">
                            <div class="cell index-cell">4</div>
                            <div class="cell cell-false">False</div>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; color: #00b894; font-weight: bold;">
                        Result: rows 1 and 3 (where True)
                    </p>
                </div>
            </div>

            <div class="alert alert-warning">
                <strong>Mental model:</strong> The mask is like a bouncer at a club. It checks every row against your condition. True = let it in. False = keep it out.
            </div>
        </div>

        <!-- =========================================
             SLIDE 7: Single Condition + Comparison Operators
             ========================================= -->
        <div class="slide">
            <h1>Comparison Operators</h1>

            <div class="concept-box" style="margin-bottom: 20px;">
                <p><strong>Comparison operators are the building blocks of every filter.</strong> They compare a column's values against a target and produce True or False for each row.</p>
            </div>

            <div class="operator-grid">
                <div class="operator-card">
                    <div class="operator-symbol">==</div>
                    <div class="operator-name">Equal to</div>
                    <div style="margin-top: 5px; font-size: 0.85rem;"><code class="code-inline">df['ano'] == 2023</code></div>
                </div>
                <div class="operator-card">
                    <div class="operator-symbol">!=</div>
                    <div class="operator-name">Not equal to</div>
                    <div style="margin-top: 5px; font-size: 0.85rem;"><code class="code-inline">df['ano'] != 2023</code></div>
                </div>
                <div class="operator-card">
                    <div class="operator-symbol">></div>
                    <div class="operator-name">Greater than</div>
                    <div style="margin-top: 5px; font-size: 0.85rem;"><code class="code-inline">df['desercion'] > 5</code></div>
                </div>
                <div class="operator-card">
                    <div class="operator-symbol"><</div>
                    <div class="operator-name">Less than</div>
                    <div style="margin-top: 5px; font-size: 0.85rem;"><code class="code-inline">df['desercion'] < 2</code></div>
                </div>
                <div class="operator-card">
                    <div class="operator-symbol">>=</div>
                    <div class="operator-name">Greater or equal</div>
                    <div style="margin-top: 5px; font-size: 0.85rem;"><code class="code-inline">df['cobertura_neta'] >= 90</code></div>
                </div>
                <div class="operator-card">
                    <div class="operator-symbol"><=</div>
                    <div class="operator-name">Less or equal</div>
                    <div style="margin-top: 5px; font-size: 0.85rem;"><code class="code-inline">df['reprobacion'] <= 3</code></div>
                </div>
            </div>

            <div class="code-block"><span class="comment"># Example: departments with dropout rate above 5%</span>
high_dropout = df[df[<span class="string">'desercion'</span>] > <span class="number">5</span>]
<span class="function">print</span>(f<span class="string">"Found {len(high_dropout)} rows with dropout > 5%"</span>)</div>

            <div class="alert alert-danger">
                <strong>Common mistake:</strong> Using <code class="code-inline">=</code> instead of <code class="code-inline">==</code>. A single <code class="code-inline">=</code> is assignment (storing a value). Double <code class="code-inline">==</code> is comparison (asking a question).
            </div>
        </div>

        <!-- =========================================
             SLIDE 8: Combining Conditions - AND (&)
             ========================================= -->
        <div class="slide">
            <h1>Combining Conditions: AND (&amp;)</h1>

            <div class="concept-box">
                <p><strong>AND means BOTH conditions must be True.</strong> The result is a smaller, more specific set of rows.</p>
                <div class="analogy">
                    "Show me books that are about Python AND were published after 2020." Both conditions must be met. A Python book from 2019 would NOT be included.
                </div>
            </div>

            <div class="venn-container">
                <div class="venn-circle venn-circle-left" style="background: rgba(102, 126, 234, 0.4); border: 3px solid #667eea;">
                    <span style="margin-right: 40px;">ano == 2023</span>
                </div>
                <div class="venn-circle venn-circle-right" style="background: rgba(0, 184, 148, 0.4); border: 3px solid #00b894;">
                    <span style="margin-left: 40px;">desercion > 5</span>
                </div>
                <div class="venn-label" style="top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 8px; color: #764ba2; font-size: 1rem;">AND: only the overlap</div>
            </div>

            <div class="code-block"><span class="comment"># AND: both conditions must be True</span>
result = df[(df[<span class="string">'ano'</span>] == <span class="number">2023</span>) &amp; (df[<span class="string">'desercion'</span>] > <span class="number">5</span>)]

<span class="comment"># "Departments in 2023 with dropout above 5%"</span>
<span class="function">print</span>(f<span class="string">"Found {len(result)} rows"</span>)</div>

            <div class="alert alert-danger" style="margin-top: 15px;">
                <strong>CRITICAL:</strong> Each condition MUST be in parentheses: <code class="code-inline">(condition1) &amp; (condition2)</code>. Without parentheses, Python gets confused about operator priority and throws an error.
            </div>
        </div>

        <!-- =========================================
             SLIDE 9: Combining Conditions - OR (|)
             ========================================= -->
        <div class="slide">
            <h1>Combining Conditions: OR (|)</h1>

            <div class="concept-box">
                <p><strong>OR means EITHER condition can be True.</strong> The result is a larger, broader set of rows.</p>
                <div class="analogy">
                    "Show me books about Python OR about Data Science." A book about either topic gets included. A book about both also gets included. Only books about neither are excluded.
                </div>
            </div>

            <div class="venn-container">
                <div class="venn-circle venn-circle-left" style="background: rgba(102, 126, 234, 0.4); border: 3px solid #667eea;">
                    <span style="margin-right: 40px;">Antioquia</span>
                </div>
                <div class="venn-circle venn-circle-right" style="background: rgba(0, 184, 148, 0.4); border: 3px solid #00b894;">
                    <span style="margin-left: 40px;">Bogota</span>
                </div>
                <div class="venn-label" style="top: 5px; left: 50%; transform: translateX(-50%); background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 8px; color: #764ba2; font-size: 1rem;">OR: everything colored</div>
            </div>

            <div class="code-block"><span class="comment"># OR: at least one condition must be True</span>
result = df[(df[<span class="string">'departamento'</span>] == <span class="string">'ANTIOQUIA'</span>) | (df[<span class="string">'departamento'</span>] == <span class="string">'BOGOTA D.C.'</span>)]

<span class="comment"># "All rows from Antioquia OR Bogota"</span>
<span class="function">print</span>(f<span class="string">"Found {len(result)} rows"</span>)</div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="comparison-good">
                    <h3>AND (&amp;) = Narrower</h3>
                    <p style="margin-top: 10px;">Both must be True.</p>
                    <p>Fewer rows in the result.</p>
                    <p>"More restrictive"</p>
                </div>
                <div class="card card-info">
                    <h3>OR (|) = Broader</h3>
                    <p style="margin-top: 10px;">Either can be True.</p>
                    <p>More rows in the result.</p>
                    <p>"More inclusive"</p>
                </div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 10: CRITICAL - and/or vs &/| and parentheses
             ========================================= -->
        <div class="slide">
            <h1>The #1 Filtering Mistake</h1>

            <div class="alert alert-danger" style="font-size: 1.1rem; margin-bottom: 30px;">
                <strong>This will cause errors EVERY TIME until you learn it.</strong> Using Python's <code class="code-inline">and</code>/<code class="code-inline">or</code> instead of pandas' <code class="code-inline">&amp;</code>/<code class="code-inline">|</code>, or forgetting parentheses.
            </div>

            <div class="grid-2">
                <div class="comparison-bad">
                    <h3>WRONG (will crash)</h3>
                    <div class="code-block" style="font-size: 0.85rem; border-color: #ff7675;"><span class="comment"># Python's 'and' - DOES NOT WORK</span>
df[df[<span class="string">'ano'</span>] == <span class="number">2023</span> <span class="keyword">and</span> df[<span class="string">'desercion'</span>] > <span class="number">5</span>]
<span class="comment"># ValueError: The truth value of a</span>
<span class="comment"># Series is ambiguous</span>

<span class="comment"># Missing parentheses - DOES NOT WORK</span>
df[df[<span class="string">'ano'</span>] == <span class="number">2023</span> &amp; df[<span class="string">'desercion'</span>] > <span class="number">5</span>]
<span class="comment"># Operator precedence error!</span></div>
                </div>
                <div class="comparison-good">
                    <h3>CORRECT</h3>
                    <div class="code-block" style="font-size: 0.85rem; border-color: #00b894;"><span class="comment"># Use & with parentheses</span>
df[(df[<span class="string">'ano'</span>] == <span class="number">2023</span>) &amp; (df[<span class="string">'desercion'</span>] > <span class="number">5</span>)]
<span class="comment"># Works perfectly!</span>

<span class="comment"># Use | with parentheses</span>
df[(df[<span class="string">'ano'</span>] == <span class="number">2023</span>) | (df[<span class="string">'ano'</span>] == <span class="number">2022</span>)]
<span class="comment"># Works perfectly!</span></div>
                </div>
            </div>

            <table class="table-styled" style="margin-top: 20px;">
                <thead>
                    <tr>
                        <th>Python keyword</th>
                        <th>pandas operator</th>
                        <th>Use when</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code class="code-inline">and</code> / <code class="code-inline">or</code></td>
                        <td style="color: #d63031; font-weight: bold;">Never for DataFrames</td>
                        <td>Only for single True/False values (like <code class="code-inline">if x > 5 and y < 10:</code>)</td>
                    </tr>
                    <tr>
                        <td><code class="code-inline">&amp;</code> / <code class="code-inline">|</code></td>
                        <td style="color: #00b894; font-weight: bold;">Always for DataFrames</td>
                        <td>When comparing entire columns (Series of True/False)</td>
                    </tr>
                </tbody>
            </table>

            <div class="alert alert-warning" style="margin-top: 15px;">
                <strong>Memory trick:</strong> When filtering DataFrames, always use the <strong>symbols</strong> (<code class="code-inline">&amp;</code> <code class="code-inline">|</code> <code class="code-inline">~</code>) and always wrap each condition in <strong>parentheses</strong>.
            </div>
        </div>

        <!-- =========================================
             SLIDE 11: Negation with ~ (NOT)
             ========================================= -->
        <div class="slide">
            <h1>Negation: The NOT Operator (~)</h1>

            <div class="concept-box">
                <p><strong>The tilde <code class="code-inline">~</code> flips every True to False and every False to True.</strong> It means "give me everything EXCEPT this."</p>
                <div class="analogy">
                    Like an invitation list: "Invite everyone who is NOT from the marketing department." The ~ takes your condition and reverses it.
                </div>
            </div>

            <div class="code-block"><span class="comment"># Without negation: rows where department IS Bogota</span>
bogota = df[df[<span class="string">'departamento'</span>] == <span class="string">'BOGOTA D.C.'</span>]

<span class="comment"># With negation: rows where department is NOT Bogota</span>
not_bogota = df[~(df[<span class="string">'departamento'</span>] == <span class="string">'BOGOTA D.C.'</span>)]

<span class="comment"># Same as using !=</span>
not_bogota = df[df[<span class="string">'departamento'</span>] != <span class="string">'BOGOTA D.C.'</span>]</div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="card card-light">
                    <h3>When to use <code class="code-inline">!=</code></h3>
                    <p style="margin-top: 10px;">Simple "not equal to one value" comparisons.</p>
                    <div class="code-block" style="font-size: 0.85rem;">df[df[<span class="string">'ano'</span>] != <span class="number">2020</span>]</div>
                </div>
                <div class="card card-light">
                    <h3>When to use <code class="code-inline">~</code></h3>
                    <p style="margin-top: 10px;">Negating complex conditions or method results.</p>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Negate .isin() or .str.contains()</span>
df[~df[<span class="string">'departamento'</span>].<span class="function">isin</span>([<span class="string">'BOGOTA D.C.'</span>, <span class="string">'NACIONAL'</span>])]</div>
                </div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 12: .isin() - Matching a List
             ========================================= -->
        <div class="slide">
            <h1>Filtering with .isin()</h1>

            <div class="concept-box">
                <p><strong><code class="code-inline">.isin()</code> checks if each value is in a list of allowed values.</strong></p>
                <div class="analogy">
                    Think of a guest list at a party. The bouncer has a list of names. For each person who arrives, they check: "Is this name on my list?" If yes, they get in. If no, they don't.
                </div>
            </div>

            <div class="grid-2">
                <div>
                    <h3>Without .isin() (long and ugly)</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Multiple OR conditions</span>
result = df[
    (df[<span class="string">'departamento'</span>] == <span class="string">'ANTIOQUIA'</span>) |
    (df[<span class="string">'departamento'</span>] == <span class="string">'BOGOTA D.C.'</span>) |
    (df[<span class="string">'departamento'</span>] == <span class="string">'VALLE DEL CAUCA'</span>) |
    (df[<span class="string">'departamento'</span>] == <span class="string">'CUNDINAMARCA'</span>)
]</div>
                </div>
                <div>
                    <h3>With .isin() (clean and readable)</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Same result, one line</span>
departments = [<span class="string">'ANTIOQUIA'</span>, <span class="string">'BOGOTA D.C.'</span>,
               <span class="string">'VALLE DEL CAUCA'</span>, <span class="string">'CUNDINAMARCA'</span>]

result = df[df[<span class="string">'departamento'</span>].<span class="function">isin</span>(departments)]</div>
                </div>
            </div>

            <div class="code-block" style="margin-top: 20px;"><span class="comment"># .isin() works with numbers too</span>
recent_years = df[df[<span class="string">'ano'</span>].<span class="function">isin</span>([<span class="number">2022</span>, <span class="number">2023</span>, <span class="number">2024</span>])]

<span class="comment"># Negate with ~: "everyone NOT on the list"</span>
excluded = df[~df[<span class="string">'departamento'</span>].<span class="function">isin</span>([<span class="string">'NACIONAL'</span>, <span class="string">'BOGOTA D.C.'</span>])]</div>

            <div class="alert alert-success">
                <strong>Rule of thumb:</strong> When you have 3+ OR conditions on the same column, use <code class="code-inline">.isin()</code> instead. It's shorter, cleaner, and less error-prone.
            </div>
        </div>

        <!-- =========================================
             SLIDE 13: .between() - Range Filtering
             ========================================= -->
        <div class="slide">
            <h1>Filtering Ranges with .between()</h1>

            <div class="concept-box">
                <p><strong><code class="code-inline">.between(low, high)</code> checks if a value falls within a range, inclusive on both ends.</strong></p>
                <div class="analogy">
                    Like a thermostat that triggers an alarm if the temperature is between 30 and 40 degrees. Everything inside the range is True, everything outside is False.
                </div>
            </div>

            <div class="grid-2">
                <div>
                    <h3>Without .between()</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Two conditions + AND</span>
result = df[
    (df[<span class="string">'desercion'</span>] >= <span class="number">2</span>) &amp;
    (df[<span class="string">'desercion'</span>] <= <span class="number">5</span>)
]</div>
                </div>
                <div>
                    <h3>With .between()</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># One clean expression</span>
result = df[
    df[<span class="string">'desercion'</span>].<span class="function">between</span>(<span class="number">2</span>, <span class="number">5</span>)
]</div>
                </div>
            </div>

            <div class="code-block" style="margin-top: 20px;"><span class="comment"># Departments with net coverage between 80% and 100%</span>
good_coverage = df[df[<span class="string">'cobertura_neta'</span>].<span class="function">between</span>(<span class="number">80</span>, <span class="number">100</span>)]
<span class="function">print</span>(f<span class="string">"Departments with 80-100% coverage: {len(good_coverage)}"</span>)

<span class="comment"># Years between 2018 and 2023</span>
recent = df[df[<span class="string">'ano'</span>].<span class="function">between</span>(<span class="number">2018</span>, <span class="number">2023</span>)]</div>

            <div class="alert alert-info">
                <strong>Note:</strong> <code class="code-inline">.between()</code> is <strong>inclusive</strong> on both ends by default. <code class="code-inline">.between(2, 5)</code> includes 2 and 5 themselves.
            </div>
        </div>

        <!-- =========================================
             SLIDE 14: String Filtering
             ========================================= -->
        <div class="slide">
            <h1>Filtering Text: String Methods</h1>

            <div class="concept-box" style="margin-bottom: 20px;">
                <p><strong>When a column contains text, you can filter based on patterns</strong> using <code class="code-inline">.str</code> methods. This is like using a search bar: "find departments that contain 'NORTE' in their name."</p>
            </div>

            <div class="code-block"><span class="comment"># .str.contains() - does the text include this substring?</span>
norte = df[df[<span class="string">'departamento'</span>].str.<span class="function">contains</span>(<span class="string">'NORTE'</span>, na=<span class="keyword">False</span>)]
<span class="comment"># Matches: "NORTE DE SANTANDER", "NORTE" in any position</span>

<span class="comment"># .str.startswith() - does the text begin with this?</span>
starts_c = df[df[<span class="string">'departamento'</span>].str.<span class="function">startswith</span>(<span class="string">'C'</span>, na=<span class="keyword">False</span>)]
<span class="comment"># Matches: "CALDAS", "CAQUETA", "CAUCA", "CESAR", etc.</span>

<span class="comment"># .str.endswith() - does the text end with this?</span>
ends_a = df[df[<span class="string">'departamento'</span>].str.<span class="function">endswith</span>(<span class="string">'A'</span>, na=<span class="keyword">False</span>)]
<span class="comment"># Matches: "ANTIOQUIA", "CUNDINAMARCA", etc.</span></div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="card card-light">
                    <h3>Case sensitivity</h3>
                    <p style="margin-top: 10px;"><code class="code-inline">.str.contains('norte')</code> will NOT match "NORTE". Either standardize your text first (Week 3!) or use <code class="code-inline">case=False</code>:</p>
                    <div class="code-block" style="font-size: 0.85rem;">df[df[<span class="string">'departamento'</span>].str.<span class="function">contains</span>(
    <span class="string">'norte'</span>, case=<span class="keyword">False</span>, na=<span class="keyword">False</span>
)]</div>
                </div>
                <div class="card card-light">
                    <h3>Why <code class="code-inline">na=False</code>?</h3>
                    <p style="margin-top: 10px;">If the column has NaN values, <code class="code-inline">.str.contains()</code> returns NaN for those rows (not True or False). Adding <code class="code-inline">na=False</code> treats NaN as "does not contain."</p>
                    <div class="alert alert-warning" style="margin-top: 10px; font-size: 0.9rem;">
                        <strong>Always add <code class="code-inline">na=False</code></strong> to avoid cryptic errors with missing values.
                    </div>
                </div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 15: .query() - Clean Alternative
             ========================================= -->
        <div class="slide">
            <h1>The .query() Method</h1>

            <div class="concept-box">
                <p><strong><code class="code-inline">.query()</code> lets you write filter conditions as a string</strong>, which is often more readable, especially for complex conditions.</p>
                <div class="analogy">
                    If boolean indexing is like writing SQL with Python syntax, <code class="code-inline">.query()</code> is like writing actual SQL. Same result, different way to express it.
                </div>
            </div>

            <div class="grid-2">
                <div>
                    <h3>Boolean indexing</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Lots of brackets and df references</span>
result = df[
    (df[<span class="string">'ano'</span>] == <span class="number">2023</span>) &amp;
    (df[<span class="string">'desercion'</span>] > <span class="number">3</span>) &amp;
    (df[<span class="string">'cobertura_neta'</span>] < <span class="number">90</span>)
]</div>
                </div>
                <div>
                    <h3>.query() version</h3>
                    <div class="code-block" style="font-size: 0.85rem;"><span class="comment"># Clean, readable, no brackets</span>
result = df.<span class="function">query</span>(
    <span class="string">'ano == 2023 and desercion > 3 and cobertura_neta < 90'</span>
)</div>
                </div>
            </div>

            <div class="code-block" style="margin-top: 20px;"><span class="comment"># More .query() examples</span>

<span class="comment"># Using 'or' and 'not' (plain English in query strings)</span>
df.<span class="function">query</span>(<span class="string">'departamento == "ANTIOQUIA" or departamento == "BOGOTA D.C."'</span>)

<span class="comment"># Using variables with @</span>
year = <span class="number">2023</span>
df.<span class="function">query</span>(<span class="string">'ano == @year'</span>)

<span class="comment"># Combining with between-style</span>
df.<span class="function">query</span>(<span class="string">'2020 <= ano <= 2023'</span>)</div>

            <div class="alert alert-info" style="margin-top: 15px;">
                <strong>When to use .query():</strong> When your filter has 3+ conditions and the bracket soup becomes hard to read. Both approaches give the same result.
            </div>
        </div>

        <!-- =========================================
             SLIDE 16: Complete Example - Chaining Filters
             ========================================= -->
        <div class="slide">
            <h1>Putting It All Together</h1>

            <p style="text-align: center; font-size: 1.2rem; margin-bottom: 20px;">
                <strong>Question:</strong> "Which departments in 2023 had high dropout rates (above 5%) but also high enrollment coverage (above 80%)?"
            </p>

            <div class="code-block"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd

<span class="comment"># 1. Load and quick-clean (Week 3 skills)</span>
df = pd.<span class="function">read_csv</span>(<span class="string">'../data/educacion_estadisticas.csv'</span>)
df[<span class="string">'departamento'</span>] = df[<span class="string">'departamento'</span>].str.<span class="function">upper</span>().str.<span class="function">strip</span>()
df[<span class="string">'ano'</span>] = df[<span class="string">'ano'</span>].<span class="function">fillna</span>(<span class="number">0</span>).<span class="function">astype</span>(<span class="function">int</span>)

<span class="comment"># 2. Build the filter step by step</span>
is_2023     = df[<span class="string">'ano'</span>] == <span class="number">2023</span>
high_dropout = df[<span class="string">'desercion'</span>] > <span class="number">5</span>
good_coverage = df[<span class="string">'cobertura_neta'</span>] > <span class="number">80</span>

<span class="comment"># 3. Combine and apply</span>
result = df[is_2023 &amp; high_dropout &amp; good_coverage]

<span class="comment"># 4. Show relevant columns</span>
<span class="function">print</span>(result[[<span class="string">'departamento'</span>, <span class="string">'ano'</span>, <span class="string">'desercion'</span>, <span class="string">'cobertura_neta'</span>]])</div>

            <div class="alert alert-success" style="margin-top: 15px;">
                <strong>Pro tip:</strong> Store each condition in a variable with a descriptive name. This makes complex filters readable and easy to debug. If something looks wrong, you can check each mask individually.
            </div>

            <div class="card card-light" style="margin-top: 15px;">
                <h3>Same thing with .query()</h3>
                <div class="code-block" style="font-size: 0.85rem;">result = df.<span class="function">query</span>(<span class="string">'ano == 2023 and desercion > 5 and cobertura_neta > 80'</span>)</div>
            </div>
        </div>

        <!-- =========================================
             SLIDE 17: Summary - When to Use Which
             ========================================= -->
        <div class="slide">
            <h1>Your Filtering Toolkit</h1>

            <table class="table-styled">
                <thead>
                    <tr>
                        <th>Need</th>
                        <th>Method</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Single condition</strong></td>
                        <td><code class="code-inline">df[df['col'] > value]</code></td>
                        <td>Dropout above 5%</td>
                    </tr>
                    <tr>
                        <td><strong>Multiple AND</strong></td>
                        <td><code class="code-inline">(cond1) &amp; (cond2)</code></td>
                        <td>Year 2023 AND dropout above 5%</td>
                    </tr>
                    <tr>
                        <td><strong>Multiple OR</strong></td>
                        <td><code class="code-inline">(cond1) | (cond2)</code></td>
                        <td>Antioquia OR Bogota</td>
                    </tr>
                    <tr>
                        <td><strong>Match a list</strong></td>
                        <td><code class="code-inline">.isin(list)</code></td>
                        <td>Years 2022, 2023, 2024</td>
                    </tr>
                    <tr>
                        <td><strong>Numeric range</strong></td>
                        <td><code class="code-inline">.between(low, high)</code></td>
                        <td>Coverage between 80% and 100%</td>
                    </tr>
                    <tr>
                        <td><strong>Text pattern</strong></td>
                        <td><code class="code-inline">.str.contains()</code></td>
                        <td>Department name contains "NORTE"</td>
                    </tr>
                    <tr>
                        <td><strong>Exclude rows</strong></td>
                        <td><code class="code-inline">~condition</code></td>
                        <td>All departments EXCEPT Bogota</td>
                    </tr>
                    <tr>
                        <td><strong>Clean syntax</strong></td>
                        <td><code class="code-inline">.query('expression')</code></td>
                        <td>Complex multi-condition filters</td>
                    </tr>
                </tbody>
            </table>

            <div class="alert alert-danger" style="margin-top: 20px;">
                <strong>Three rules to remember:</strong>
                <ol style="margin-top: 10px; margin-left: 20px;">
                    <li>Use <code class="code-inline">&amp;</code> <code class="code-inline">|</code> <code class="code-inline">~</code> (not <code class="code-inline">and</code> <code class="code-inline">or</code> <code class="code-inline">not</code>) for DataFrames</li>
                    <li>Wrap every condition in <strong>parentheses</strong></li>
                    <li>Add <code class="code-inline">na=False</code> to string methods when the column may have NaN</li>
                </ol>
            </div>
        </div>

        <!-- =========================================
             SLIDE 18: What's Next + Tasks
             ========================================= -->
        <div class="slide">
            <h1>Summary and Next Steps</h1>

            <div class="grid-2" style="margin-top: 20px;">
                <div>
                    <h2>What We Learned</h2>
                    <div class="card card-info">
                        <ul style="list-style: none;">
                            <li style="padding: 8px 0;">Filtering = asking a question, getting matching rows</li>
                            <li style="padding: 8px 0;">Boolean masks: True keeps the row, False drops it</li>
                            <li style="padding: 8px 0;">6 comparison operators: ==, !=, >, <, >=, <=</li>
                            <li style="padding: 8px 0;">Combine with &amp; (AND), | (OR), ~ (NOT)</li>
                            <li style="padding: 8px 0;">.isin() for lists, .between() for ranges</li>
                            <li style="padding: 8px 0;">.str.contains() for text patterns</li>
                            <li style="padding: 8px 0;">.query() for clean, readable syntax</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <h2>Your Tasks</h2>
                    <div class="card card-primary">
                        <ul style="list-style: none;">
                            <li style="padding: 8px 0;">1. Complete the in-class exercise</li>
                            <li style="padding: 8px 0;">2. Finish the workshop notebook</li>
                            <li style="padding: 8px 0;">3. Apply filtering to YOUR project dataset</li>
                            <li style="padding: 8px 0;">4. Prepare questions you want to answer about your data</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="alert alert-success" style="margin-top: 20px; text-align: center;">
                <strong>Next week:</strong> Exploratory Data Analysis (EDA) - using statistics and GroupBy to discover patterns in your data.
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <div class="card card-success" style="display: inline-block;">
                    <h3 style="margin: 0;">Questions?</h3>
                    <p style="margin: 10px 0 0 0;">Let's discuss before the exercise!</p>
                </div>
            </div>
        </div>

    </div>

    <!-- NAVIGATION SCRIPT -->
    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        function updateCounter() {
            document.getElementById('slideCounter').textContent = `${currentSlide + 1} / ${totalSlides}`;
        }

        function showSlide(n) {
            slides.forEach(slide => slide.style.display = 'none');
            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].style.display = 'flex';
            slides[currentSlide].style.animation = 'fadeInUp 0.4s ease-out';
            updateCounter();
        }

        function nextSlide() {
            showSlide(currentSlide + 1);
        }

        function previousSlide() {
            showSlide(currentSlide - 1);
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'Enter') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousSlide();
            } else if (e.key === 'Home') {
                e.preventDefault();
                showSlide(0);
            } else if (e.key === 'End') {
                e.preventDefault();
                showSlide(totalSlides - 1);
            }
        });

        // Initialize
        showSlide(0);
    </script>
</body>
</html>
